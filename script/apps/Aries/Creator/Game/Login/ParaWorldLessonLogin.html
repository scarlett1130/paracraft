<!-- "script/apps/Aries/Creator/Game/Login/ParaWorldLessonLogin.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<title>2009.8.2</title>
</head>
<body> 
<pe:mcml>
<script type="text/npl" src="ParaWorldLessons.lua"><![CDATA[
ParaWorldLessons = commonlib.gettable("MyCompany.Aries.Game.MainLogin.ParaWorldLessons")
lesson = ParaWorldLessons.GetCurrentLesson();
classId = tonumber(Page:GetRequestParam("classId") or 0)
function GetClassId()
    return classId;
end

function OnClose()
    Page:CloseWindow()
end

function EnterClass()
    local username = Page:GetValue("username", "")
    ParaWorldLessons.EnterClassImp(classId, username);
end

function OnEnterTempUser()
    local username = Page:GetValue("username", "")
    if(username == "") then
        _guihelper.MessageBox(L"请输入你的名字");
        return
    end
    EnterClass()
    OnClose()
end

function OnEnterKeepWorkUser()
    local LoginMain = NPL.load("(gl)Mod/WorldShare/cellar/Login/LoginMain.lua")
	if(LoginMain.IsSignedIn()) then
		EnterClass()
	else
		LoginMain.ShowLoginModal(function()
			EnterClass()
		end, L"登陆后才能访问课程系统, 请先登录");
	end
    OnClose()
end
]]></script>
<aries:window mode="thin" width="400" title='<%=format(L"课堂ID: %s", tostring(GetClassId()))%>' onclose="OnClose()">
    <div class="default" style="margin-left:10px;margin-bottom:10px">
        <div style="margin-top:10px">
            <div><div style="float:left;min-width:100px;"><%=L"你的真实姓名:"%></div><input name="username" style="width:200px;height:26px" /></div>
            <div style="margin-top:5px;color:#ff6a00"><%=L"(只有老师可见)"%></div>
        </div>
        <div style="margin-left:0px;margin:20px;">
            <div style="margin-bottom:15px;"><%=L"请选择进入课堂的方式"%></div>
            <input type="button" style="margin-left:0px;min-width:120px;height:26px;" class="button" value='<%=L"临时进入"%>' onclick="OnEnterTempUser"/>
            <input type="button" style="margin-left:60px;min-width:120px;height:26px;" class="button" value='<%=L"登陆并进入"%>' onclick="OnEnterKeepWorkUser"/>
        </div>
    </div>
</aries:window>
</pe:mcml>
</body>
</html>